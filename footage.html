<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>The Kawaine Files — Footage</title>
  <style>
    :root{
      --bg:#010101;
      --text:#00ff7f;
      --muted:#6b6b6b;
      --accent:#ff4444;
      --term-bg:rgba(0,0,0,0.85);
    }
    html,body{height:100%;margin:0;background:#000;font-family:"Lucida Console",monospace;color:var(--text);}
    .wrap{display:flex;align-items:center;justify-content:center;height:100%;padding:20px;box-sizing:border-box;}
    .terminal{
      width:920px;max-width:95%;background:var(--term-bg);border-radius:8px;padding:18px;
      box-shadow:0 0 40px rgba(0,255,127,0.15);border:1px solid rgba(0,255,127,0.08);overflow:hidden;
      position:relative;
    }
    .term-header{display:flex;gap:8px;align-items:center;margin-bottom:12px}
    .dots{display:flex;gap:6px}
    .dot{width:12px;height:12px;border-radius:50%;}
    .dot.r{background:#ff5f56}.dot.y{background:#ffbd2e}.dot.g{background:#27c93f}
    .title{margin-left:auto;color:var(--muted);font-size:13px}
    .screen{background:#000;padding:18px;border-radius:6px;min-height:300px;overflow:auto;position:relative;}
    .line{white-space:pre-wrap;font-size:15px;line-height:1.45;}
    .muted{color:var(--muted)}
    .prompt{display:flex;gap:8px;align-items:flex-start;margin-top:10px;}
    .prompt span{color:var(--accent);width:90px;display:inline-block}
    .cmdline{background:transparent;border:none;outline:none;color:var(--text);font-family:inherit;font-size:15px}
    .blink{animation:blink 1s steps(2) infinite}
    @keyframes blink{50%{opacity:0}}
    .video-wrap{display:none;margin-top:14px;border-radius:6px;overflow:hidden;border:1px solid rgba(255,68,68,0.06)}
    video{width:100%;display:block;background:#000}
    .glitch:before,.glitch:after{content:"";position:absolute;inset:0;pointer-events:none;mix-blend-mode:screen;opacity:0.03;background-image:linear-gradient(90deg,transparent 0 2px,rgba(255,255,255,0.04) 2px 3px,transparent 3px 100%);transform:skewY(-1deg);}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="terminal">
      <div class="term-header">
        <div class="dots">
          <div class="dot r"></div><div class="dot y"></div><div class="dot g"></div>
        </div>
        <div class="title">/archive/RECOVERED — read-only</div>
      </div>
      <div class="screen glitch" id="screen" tabindex="0">
        <div class="line muted">-- SYSTEM RESTORE INTERFACE --</div>
        <div class="line">verifying files... [████████░░] 87%</div>
        <div class="line">scanning: /archive/FRAGMENTS/</div>
        <div class="line">found: 1 file (status: damaged)</div>
        <div class="line muted">type <span style="color:#fff">help</span> if you’re lost</div>

        <div id="history" style="margin-top:12px"></div>

        <div class="prompt">
          <span>&gt; root@kawaine:</span>
          <div class="input">
            <input id="cmd" class="cmdline" autocomplete="off" autofocus placeholder="entrer une commande..." />
            <span id="caret" class="blink" style="display:inline-block;width:8px;height:16px;background:var(--text);vertical-align:middle;margin-left:6px;"></span>
          </div>
        </div>

        <div id="videoWrap" class="video-wrap">
          <video id="footage" controls preload="metadata">
            <source src="https://drive.google.com/uc?export=download&id=1TWE0Op6Ui4_Uk2_wu9ulq80w2Dq-trNJ" type="video/mp4">
            Ton navigateur ne supporte pas la vidéo.
          </video>
        </div>
      </div>
    </div>
  </div>

<script>
const cmdInput = document.getElementById('cmd');
const historyEl = document.getElementById('history');
const videoWrap = document.getElementById('videoWrap');
const footage = document.getElementById('footage');

const safeWrite = (text, cls='line')=>{
  const d = document.createElement('div');
  d.className = cls;
  d.textContent = text;
  historyEl.appendChild(d);
  d.scrollIntoView({behavior:'smooth', block:'end'});
};

const commands = {
  help(){
    safeWrite('> help', 'line');
    setTimeout(()=>{
      safeWrite('Available system calls:', 'muted');
      safeWrite('- “ls”   → locate fragments', 'muted');
      safeWrite('- “dec …” → attempt to rebuild header', 'muted');
      safeWrite('- “open …” or “play …” → ???', 'muted');
      safeWrite('Note: incomplete documentation. proceed carefully.', 'muted');
    },400);
  },
  ls(){
    safeWrite('drwxr-xr-x  archive', 'line');
    safeWrite('-rw-r--r--  f00t4g3.mp4  [damaged]  [locked]', 'line');
  },
  decrypt(){
    safeWrite('initiating decryption protocol...', 'line');
    setTimeout(()=>safeWrite('error: checksum mismatch / missing key fragment', 'muted'), 1000);
    setTimeout(()=>safeWrite('try alternate command or open manually.', 'muted'), 2000);
  },
  open(args){
    const target = args.join(' ').toLowerCase();
    if(target.includes('footage') || target.includes('f00t4g3')){
      revealVideo();
    } else {
      safeWrite('file not found: '+target, 'muted');
    }
  },
  play(args){
    const target = args.join(' ').toLowerCase();
    if(target.includes('footage') || target.includes('f00t4g3')){
      revealVideo();
    } else {
      safeWrite('unknown media: '+target, 'muted');
    }
  }
};

function revealVideo(){
  if(videoWrap.style.display === 'block') {
    safeWrite('video already unlocked', 'muted');
    return;
  }
  safeWrite('opening f00t4g3.mp4 ...', 'line');
  setTimeout(()=>safeWrite('patching header ... done', 'muted'), 700);
  setTimeout(()=>safeWrite('decrypting stream ███▒▒▒▒▒▒▒ 41%', 'line'), 1400);
  setTimeout(()=>{
    safeWrite('stream stabilized. launching player.', 'line');
    videoWrap.style.display = 'block';
    footage.play().catch(()=>safeWrite('auto-play blocked — press ▶️', 'muted'));
    footage.scrollIntoView({behavior:'smooth', block:'center'});
  }, 2500);
}

cmdInput.addEventListener('keydown', (e)=>{
  if(e.key==='Enter'){
    const raw = cmdInput.value.trim();
    if(!raw) return;
    safeWrite('> '+raw, 'line');
    const parts = raw.split(/\s+/);
    const cmd = parts[0].toLowerCase();
    const args = parts.slice(1);
    if(commands[cmd]){
      commands[cmd](args);
    } else {
      safeWrite('unknown command: '+cmd, 'muted');
    }
    cmdInput.value='';
  }
});

document.getElementById('screen').addEventListener('click', ()=>cmdInput.focus());

setTimeout(()=>{
  safeWrite('> init diagnostics', 'line');
  setTimeout(()=>safeWrite('> result: one file partially recovered', 'muted'), 700);
  setTimeout(()=>safeWrite('> type “help” for system hints', 'muted'), 1500);
},1000);
</script>
</body>
</html>
